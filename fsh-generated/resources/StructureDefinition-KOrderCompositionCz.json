{
  "resourceType": "StructureDefinition",
  "id": "KOrderCompositionCz",
  "extension": [
    {
      "url": "http://hl7.org/fhir/StructureDefinition/structuredefinition-fmm",
      "valueInteger": 0
    },
    {
      "url": "http://hl7.org/fhir/StructureDefinition/structuredefinition-standards-status",
      "valueCode": "draft"
    }
  ],
  "url": "https://hl7.cz/fhir/korder/StructureDefinition/KOrderCompositionCz",
  "name": "KOrderCompositionCz",
  "title": "Composition: K-order (Žádanka) (CZ)",
  "status": "draft",
  "publisher": "HL7 CZ",
  "description": "K-order Composition (žádanka) pro národní IG (CZ).\nKompozice slouží jako dokumentový kontejner nad ServiceRequest (KOrderServiceRequestCz),\nPatient, Coverage (pojištění), Condition (diagnózy) a DocumentReference (přílohy).\nSekce poskytují čitelný přehled a odkazují na příslušné resources obsažené v Bundle.",
  "copyright": "HL7 CZ",
  "fhirVersion": "4.0.1",
  "kind": "resource",
  "abstract": false,
  "type": "Composition",
  "baseDefinition": "http://hl7.org/fhir/StructureDefinition/Composition",
  "derivation": "constraint",
  "differential": {
    "element": [
      {
        "id": "Composition",
        "path": "Composition",
        "short": "K-order composition",
        "definition": "K-order composition (žádanka). Composition definuje strukturu dokumentu. \nPlný obsah dokumentu je obsažen v Bundle, kde je Composition prvním resourcem.\nPole section.text by mělo obsahovat textovou reprezentaci všech uvedených entry."
      },
      {
        "id": "Composition.meta.security",
        "path": "Composition.meta.security",
        "mustSupport": true
      },
      {
        "id": "Composition.extension",
        "path": "Composition.extension",
        "slicing": {
          "discriminator": [
            {
              "type": "value",
              "path": "url"
            }
          ],
          "ordered": false,
          "rules": "open"
        }
      },
      {
        "id": "Composition.extension:presentedForm",
        "path": "Composition.extension",
        "sliceName": "presentedForm",
        "short": "Presented form",
        "min": 0,
        "max": "*",
        "type": [
          {
            "code": "Extension",
            "profile": [
              "https://hl7.cz/fhir/core/StructureDefinition/presentedForm"
            ]
          }
        ]
      },
      {
        "id": "Composition.extension:presentedForm.value[x].contentType",
        "path": "Composition.extension.value[x].contentType",
        "example": [
          {
            "label": "pdf",
            "valueCode": "application/pdf"
          }
        ]
      },
      {
        "id": "Composition.extension:presentedForm.value[x].data",
        "path": "Composition.extension.value[x].data",
        "short": "B64 in-line data"
      },
      {
        "id": "Composition.extension:presentedForm.value[x].url",
        "path": "Composition.extension.value[x].url",
        "short": "URL of the document"
      },
      {
        "id": "Composition.extension:informationRecipient",
        "path": "Composition.extension",
        "sliceName": "informationRecipient",
        "min": 0,
        "max": "*",
        "type": [
          {
            "code": "Extension",
            "profile": [
              "http://hl7.eu/fhir/StructureDefinition/information-recipient"
            ]
          }
        ]
      },
      {
        "id": "Composition.extension:informationRecipient.value[x]",
        "path": "Composition.extension.value[x]",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "https://hl7.cz/fhir/core/StructureDefinition/cz-practitioner-core",
              "https://hl7.cz/fhir/core/StructureDefinition/cz-device-observer",
              "https://hl7.cz/fhir/core/StructureDefinition/cz-patient-core",
              "https://hl7.cz/fhir/core/StructureDefinition/cz-relatedPerson-core",
              "https://hl7.cz/fhir/core/StructureDefinition/cz-practitionerrole-core",
              "https://hl7.cz/fhir/core/StructureDefinition/cz-organization-core"
            ]
          }
        ]
      },
      {
        "id": "Composition.identifier",
        "path": "Composition.identifier",
        "min": 1,
        "mustSupport": true
      },
      {
        "id": "Composition.identifier.system",
        "path": "Composition.identifier.system",
        "patternUri": "urn:ietf:rfc:4122"
      },
      {
        "id": "Composition.status",
        "path": "Composition.status",
        "fixedCode": "final",
        "mustSupport": true
      },
      {
        "id": "Composition.subject",
        "path": "Composition.subject",
        "min": 1,
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "https://hl7.cz/fhir/core/StructureDefinition/cz-patient-core"
            ]
          }
        ],
        "mustSupport": true
      },
      {
        "id": "Composition.encounter",
        "path": "Composition.encounter",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "https://hl7.cz/fhir/core/StructureDefinition/cz-encounter"
            ]
          }
        ]
      },
      {
        "id": "Composition.date",
        "path": "Composition.date",
        "mustSupport": true
      },
      {
        "id": "Composition.author",
        "path": "Composition.author",
        "short": "Who/what authored the K-order",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "https://hl7.cz/fhir/core/StructureDefinition/cz-practitioner-core",
              "https://hl7.cz/fhir/core/StructureDefinition/cz-practitionerrole-core",
              "https://hl7.cz/fhir/core/StructureDefinition/cz-device-observer",
              "https://hl7.cz/fhir/core/StructureDefinition/cz-organization-core"
            ]
          }
        ],
        "mustSupport": true
      },
      {
        "id": "Composition.title",
        "path": "Composition.title",
        "mustSupport": true
      },
      {
        "id": "Composition.attester",
        "path": "Composition.attester",
        "slicing": {
          "discriminator": [
            {
              "type": "value",
              "path": "mode"
            }
          ],
          "rules": "open",
          "ordered": false
        },
        "mustSupport": true
      },
      {
        "id": "Composition.attester.party",
        "path": "Composition.attester.party",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "https://hl7.cz/fhir/core/StructureDefinition/cz-practitioner-core",
              "https://hl7.cz/fhir/core/StructureDefinition/cz-practitionerrole-core",
              "https://hl7.cz/fhir/core/StructureDefinition/cz-organization-core"
            ]
          }
        ]
      },
      {
        "id": "Composition.attester:legalAuthenticator",
        "path": "Composition.attester",
        "sliceName": "legalAuthenticator",
        "min": 0,
        "max": "1"
      },
      {
        "id": "Composition.attester:legalAuthenticator.mode",
        "path": "Composition.attester.mode",
        "patternCode": "legal",
        "mustSupport": true
      },
      {
        "id": "Composition.attester:legalAuthenticator.party",
        "path": "Composition.attester.party",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "https://hl7.cz/fhir/core/StructureDefinition/cz-practitionerrole-core"
            ]
          }
        ]
      },
      {
        "id": "Composition.attester:resultValidator",
        "path": "Composition.attester",
        "sliceName": "resultValidator",
        "min": 0,
        "max": "1"
      },
      {
        "id": "Composition.attester:resultValidator.mode",
        "path": "Composition.attester.mode",
        "patternCode": "professional",
        "mustSupport": true
      },
      {
        "id": "Composition.attester:resultValidator.party",
        "path": "Composition.attester.party",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "https://hl7.cz/fhir/core/StructureDefinition/cz-practitionerrole-core"
            ]
          }
        ]
      },
      {
        "id": "Composition.custodian",
        "path": "Composition.custodian",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "https://hl7.cz/fhir/core/StructureDefinition/cz-organization-core"
            ]
          }
        ],
        "mustSupport": true
      },
      {
        "id": "Composition.event.code",
        "path": "Composition.event.code",
        "slicing": {
          "discriminator": [
            {
              "type": "value",
              "path": "coding"
            }
          ],
          "rules": "open",
          "ordered": false
        }
      },
      {
        "id": "Composition.section",
        "path": "Composition.section",
        "slicing": {
          "discriminator": [
            {
              "type": "pattern",
              "path": "code"
            }
          ],
          "rules": "open",
          "ordered": false
        },
        "min": 4,
        "mustSupport": true
      },
      {
        "id": "Composition.section.author",
        "path": "Composition.section.author",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "https://hl7.cz/fhir/core/StructureDefinition/cz-practitioner-core",
              "https://hl7.cz/fhir/core/StructureDefinition/cz-practitionerrole-core",
              "https://hl7.cz/fhir/core/StructureDefinition/cz-device-observer",
              "https://hl7.cz/fhir/core/StructureDefinition/cz-patient-core",
              "https://hl7.cz/fhir/core/StructureDefinition/cz-relatedPerson-core",
              "https://hl7.cz/fhir/core/StructureDefinition/cz-organization-core"
            ]
          }
        ]
      },
      {
        "id": "Composition.section:patient",
        "path": "Composition.section",
        "sliceName": "patient",
        "min": 1,
        "max": "1"
      },
      {
        "id": "Composition.section:patient.title",
        "path": "Composition.section.title",
        "patternString": "Patient"
      },
      {
        "id": "Composition.section:patient.code",
        "path": "Composition.section.code",
        "min": 1,
        "patternCodeableConcept": {
          "coding": [
            {
              "code": "48765-2",
              "system": "http://loinc.org"
            }
          ]
        }
      },
      {
        "id": "Composition.section:patient.author",
        "path": "Composition.section.author",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "https://hl7.cz/fhir/core/StructureDefinition/cz-practitioner-core",
              "https://hl7.cz/fhir/core/StructureDefinition/cz-practitionerrole-core",
              "https://hl7.cz/fhir/core/StructureDefinition/cz-device-observer",
              "https://hl7.cz/fhir/core/StructureDefinition/cz-patient-core",
              "https://hl7.cz/fhir/core/StructureDefinition/cz-relatedPerson-core",
              "https://hl7.cz/fhir/core/StructureDefinition/cz-organization-core"
            ]
          }
        ]
      },
      {
        "id": "Composition.section:patient.entry",
        "path": "Composition.section.entry",
        "min": 1,
        "max": "1",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "https://hl7.cz/fhir/core/StructureDefinition/cz-patient-core"
            ]
          }
        ]
      },
      {
        "id": "Composition.section:insurance",
        "path": "Composition.section",
        "sliceName": "insurance",
        "min": 0,
        "max": "1"
      },
      {
        "id": "Composition.section:insurance.title",
        "path": "Composition.section.title",
        "patternString": "Insurance"
      },
      {
        "id": "Composition.section:insurance.code",
        "path": "Composition.section.code",
        "min": 1,
        "patternCodeableConcept": {
          "coding": [
            {
              "code": "48768-6",
              "system": "http://loinc.org"
            }
          ]
        }
      },
      {
        "id": "Composition.section:insurance.author",
        "path": "Composition.section.author",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "https://hl7.cz/fhir/core/StructureDefinition/cz-practitioner-core",
              "https://hl7.cz/fhir/core/StructureDefinition/cz-practitionerrole-core",
              "https://hl7.cz/fhir/core/StructureDefinition/cz-device-observer",
              "https://hl7.cz/fhir/core/StructureDefinition/cz-patient-core",
              "https://hl7.cz/fhir/core/StructureDefinition/cz-relatedPerson-core",
              "https://hl7.cz/fhir/core/StructureDefinition/cz-organization-core"
            ]
          }
        ]
      },
      {
        "id": "Composition.section:insurance.entry",
        "path": "Composition.section.entry",
        "min": 1,
        "max": "1",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "https://hl7.cz/fhir/core/StructureDefinition/cz-coverage"
            ]
          }
        ]
      },
      {
        "id": "Composition.section:requester",
        "path": "Composition.section",
        "sliceName": "requester",
        "min": 1,
        "max": "1"
      },
      {
        "id": "Composition.section:requester.title",
        "path": "Composition.section.title",
        "patternString": "Requester"
      },
      {
        "id": "Composition.section:requester.code",
        "path": "Composition.section.code",
        "min": 1,
        "patternCodeableConcept": {
          "coding": [
            {
              "code": "12118-4",
              "system": "http://loinc.org"
            }
          ]
        }
      },
      {
        "id": "Composition.section:requester.author",
        "path": "Composition.section.author",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "https://hl7.cz/fhir/core/StructureDefinition/cz-practitioner-core",
              "https://hl7.cz/fhir/core/StructureDefinition/cz-practitionerrole-core",
              "https://hl7.cz/fhir/core/StructureDefinition/cz-device-observer",
              "https://hl7.cz/fhir/core/StructureDefinition/cz-patient-core",
              "https://hl7.cz/fhir/core/StructureDefinition/cz-relatedPerson-core",
              "https://hl7.cz/fhir/core/StructureDefinition/cz-organization-core"
            ]
          }
        ]
      },
      {
        "id": "Composition.section:requester.entry",
        "path": "Composition.section.entry",
        "min": 1,
        "max": "1",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "https://hl7.cz/fhir/core/StructureDefinition/cz-practitioner-core",
              "https://hl7.cz/fhir/core/StructureDefinition/cz-practitionerrole-core",
              "https://hl7.cz/fhir/core/StructureDefinition/cz-organization-core"
            ]
          }
        ]
      },
      {
        "id": "Composition.section:performer",
        "path": "Composition.section",
        "sliceName": "performer",
        "min": 0,
        "max": "1"
      },
      {
        "id": "Composition.section:performer.title",
        "path": "Composition.section.title",
        "patternString": "Performer"
      },
      {
        "id": "Composition.section:performer.code",
        "path": "Composition.section.code",
        "min": 1,
        "patternCodeableConcept": {
          "coding": [
            {
              "code": "18726-0",
              "system": "http://loinc.org"
            }
          ]
        }
      },
      {
        "id": "Composition.section:performer.author",
        "path": "Composition.section.author",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "https://hl7.cz/fhir/core/StructureDefinition/cz-practitioner-core",
              "https://hl7.cz/fhir/core/StructureDefinition/cz-practitionerrole-core",
              "https://hl7.cz/fhir/core/StructureDefinition/cz-device-observer",
              "https://hl7.cz/fhir/core/StructureDefinition/cz-patient-core",
              "https://hl7.cz/fhir/core/StructureDefinition/cz-relatedPerson-core",
              "https://hl7.cz/fhir/core/StructureDefinition/cz-organization-core"
            ]
          }
        ]
      },
      {
        "id": "Composition.section:performer.entry",
        "path": "Composition.section.entry",
        "max": "1",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "https://hl7.cz/fhir/core/StructureDefinition/cz-practitioner-core",
              "https://hl7.cz/fhir/core/StructureDefinition/cz-organization-core",
              "https://hl7.cz/fhir/core/StructureDefinition/cz-practitionerrole-core"
            ]
          }
        ]
      },
      {
        "id": "Composition.section:diagnoses",
        "path": "Composition.section",
        "sliceName": "diagnoses",
        "min": 1,
        "max": "1"
      },
      {
        "id": "Composition.section:diagnoses.title",
        "path": "Composition.section.title",
        "patternString": "Diagnoses"
      },
      {
        "id": "Composition.section:diagnoses.code",
        "path": "Composition.section.code",
        "min": 1,
        "patternCodeableConcept": {
          "coding": [
            {
              "code": "11450-4",
              "system": "http://loinc.org"
            }
          ]
        }
      },
      {
        "id": "Composition.section:diagnoses.author",
        "path": "Composition.section.author",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "https://hl7.cz/fhir/core/StructureDefinition/cz-practitioner-core",
              "https://hl7.cz/fhir/core/StructureDefinition/cz-practitionerrole-core",
              "https://hl7.cz/fhir/core/StructureDefinition/cz-device-observer",
              "https://hl7.cz/fhir/core/StructureDefinition/cz-patient-core",
              "https://hl7.cz/fhir/core/StructureDefinition/cz-relatedPerson-core",
              "https://hl7.cz/fhir/core/StructureDefinition/cz-organization-core"
            ]
          }
        ]
      },
      {
        "id": "Composition.section:diagnoses.entry",
        "path": "Composition.section.entry",
        "min": 1,
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "https://hl7.cz/fhir/korder/StructureDefinition/KOrderConditionCz"
            ]
          }
        ]
      },
      {
        "id": "Composition.section:reasons",
        "path": "Composition.section",
        "sliceName": "reasons",
        "min": 0,
        "max": "1"
      },
      {
        "id": "Composition.section:reasons.title",
        "path": "Composition.section.title",
        "patternString": "Clinical justification"
      },
      {
        "id": "Composition.section:reasons.code",
        "path": "Composition.section.code",
        "min": 1,
        "patternCodeableConcept": {
          "coding": [
            {
              "code": "29299-5",
              "system": "http://loinc.org"
            }
          ]
        }
      },
      {
        "id": "Composition.section:reasons.author",
        "path": "Composition.section.author",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "https://hl7.cz/fhir/core/StructureDefinition/cz-practitioner-core",
              "https://hl7.cz/fhir/core/StructureDefinition/cz-practitionerrole-core",
              "https://hl7.cz/fhir/core/StructureDefinition/cz-device-observer",
              "https://hl7.cz/fhir/core/StructureDefinition/cz-patient-core",
              "https://hl7.cz/fhir/core/StructureDefinition/cz-relatedPerson-core",
              "https://hl7.cz/fhir/core/StructureDefinition/cz-organization-core"
            ]
          }
        ]
      },
      {
        "id": "Composition.section:reasons.text",
        "path": "Composition.section.text",
        "mustSupport": true
      },
      {
        "id": "Composition.section:reasons.entry",
        "path": "Composition.section.entry",
        "max": "0"
      },
      {
        "id": "Composition.section:examinations",
        "path": "Composition.section",
        "sliceName": "examinations",
        "min": 1,
        "max": "1"
      },
      {
        "id": "Composition.section:examinations.title",
        "path": "Composition.section.title",
        "patternString": "Requested examinations"
      },
      {
        "id": "Composition.section:examinations.code",
        "path": "Composition.section.code",
        "min": 1,
        "patternCodeableConcept": {
          "coding": [
            {
              "code": "57133-1",
              "system": "http://loinc.org"
            }
          ]
        }
      },
      {
        "id": "Composition.section:examinations.author",
        "path": "Composition.section.author",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "https://hl7.cz/fhir/core/StructureDefinition/cz-practitioner-core",
              "https://hl7.cz/fhir/core/StructureDefinition/cz-practitionerrole-core",
              "https://hl7.cz/fhir/core/StructureDefinition/cz-device-observer",
              "https://hl7.cz/fhir/core/StructureDefinition/cz-patient-core",
              "https://hl7.cz/fhir/core/StructureDefinition/cz-relatedPerson-core",
              "https://hl7.cz/fhir/core/StructureDefinition/cz-organization-core"
            ]
          }
        ]
      },
      {
        "id": "Composition.section:examinations.entry",
        "path": "Composition.section.entry",
        "min": 1,
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "https://hl7.cz/fhir/korder/StructureDefinition/KOrderServiceRequestCz"
            ]
          }
        ]
      },
      {
        "id": "Composition.section:attachments",
        "path": "Composition.section",
        "sliceName": "attachments",
        "min": 0,
        "max": "*"
      },
      {
        "id": "Composition.section:attachments.title",
        "path": "Composition.section.title",
        "patternString": "Attachments"
      },
      {
        "id": "Composition.section:attachments.code",
        "path": "Composition.section.code",
        "min": 1,
        "patternCodeableConcept": {
          "coding": [
            {
              "code": "55107-7",
              "system": "http://loinc.org"
            }
          ]
        }
      },
      {
        "id": "Composition.section:attachments.author",
        "path": "Composition.section.author",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "https://hl7.cz/fhir/core/StructureDefinition/cz-practitioner-core",
              "https://hl7.cz/fhir/core/StructureDefinition/cz-practitionerrole-core",
              "https://hl7.cz/fhir/core/StructureDefinition/cz-device-observer",
              "https://hl7.cz/fhir/core/StructureDefinition/cz-patient-core",
              "https://hl7.cz/fhir/core/StructureDefinition/cz-relatedPerson-core",
              "https://hl7.cz/fhir/core/StructureDefinition/cz-organization-core"
            ]
          }
        ]
      },
      {
        "id": "Composition.section:attachments.entry",
        "path": "Composition.section.entry",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "https://hl7.cz/fhir/core/StructureDefinition/cz-attachment"
            ]
          }
        ]
      },
      {
        "id": "Composition.section:signature",
        "path": "Composition.section",
        "sliceName": "signature",
        "min": 0,
        "max": "1"
      },
      {
        "id": "Composition.section:signature.title",
        "path": "Composition.section.title",
        "patternString": "Signature"
      },
      {
        "id": "Composition.section:signature.code",
        "path": "Composition.section.code",
        "min": 1,
        "patternCodeableConcept": {
          "coding": [
            {
              "code": "64292-6",
              "system": "http://loinc.org"
            }
          ]
        }
      },
      {
        "id": "Composition.section:signature.author",
        "path": "Composition.section.author",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "https://hl7.cz/fhir/core/StructureDefinition/cz-practitioner-core",
              "https://hl7.cz/fhir/core/StructureDefinition/cz-practitionerrole-core",
              "https://hl7.cz/fhir/core/StructureDefinition/cz-device-observer",
              "https://hl7.cz/fhir/core/StructureDefinition/cz-patient-core",
              "https://hl7.cz/fhir/core/StructureDefinition/cz-relatedPerson-core",
              "https://hl7.cz/fhir/core/StructureDefinition/cz-organization-core"
            ]
          }
        ]
      },
      {
        "id": "Composition.section:signature.entry",
        "path": "Composition.section.entry",
        "max": "1",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "https://hl7.cz/fhir/core/StructureDefinition/cz-provenance"
            ]
          }
        ]
      }
    ]
  }
}
